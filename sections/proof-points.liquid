{% comment %} /sections/proof-points.liquid {% endcomment %}

{{ 'section-proof-points.css' | asset_url | stylesheet_tag }}

{%- liquid
  assign heading = section.settings.heading
  assign heading_italic = section.settings.heading_italic
  assign button_text = section.settings.button_text
  assign button_link = section.settings.button_link
  assign stat_image = section.settings.stat_image
  assign stat_number = section.settings.stat_number
  assign stat_text = section.settings.stat_text
-%}

<div
  class="proof-points-section"
  style="
    --section-padding-top: {{ section.settings.padding_top }}px;
    --section-padding-bottom: {{ section.settings.padding_bottom }}px;
    --button-bg: {{ section.settings.button_bg_color }};
    --button-text: {{ section.settings.button_text_color }};
    --button-border: {{ section.settings.button_border_color }};
  "
>
  <div class="proof-points__container">
    <div class="proof-points__content">
      {%- if heading != blank -%}
        <h2 class="proof-points__heading">
          {{ heading | escape }}
          {%- if heading_italic != blank -%}
            <em class="proof-points__heading-italic">{{ heading_italic | escape }}</em>
          {%- endif -%}
        </h2>
      {%- endif -%}

      {%- if button_text != blank and button_link != blank -%}
        <a href="{{ button_link }}" class="proof-points__button">
          {{ button_text | escape }}
        </a>
      {%- endif -%}
    </div>

    <div class="proof-points__stat-image-wrapper">
      {%- if stat_image != blank -%}
        <img
          srcset="
            {%- if stat_image.width >= 375 -%}{{ stat_image | image_url: width: 375 }} 375w,{%- endif -%}
            {%- if stat_image.width >= 750 -%}{{ stat_image | image_url: width: 750 }} 750w,{%- endif -%}
            {%- if stat_image.width >= 1000 -%}{{ stat_image | image_url: width: 1000 }} 1000w,{%- endif -%}
            {{ stat_image | image_url }} {{ stat_image.width }}w
          "
          src="{{ stat_image | image_url: width: 750 }}"
          sizes="(min-width: 990px) 50vw, 100vw"
          alt="{{ stat_image.alt | default: heading | escape }}"
          loading="lazy"
          width="{{ stat_image.width }}"
          height="{{ stat_image.height }}"
          class="proof-points__stat-image"
        >
        <div class="proof-points__stat-overlay">
          {%- if stat_number != blank -%}
            <div class="proof-points__stat-number">{{ stat_number | escape }}</div>
          {%- endif -%}
          {%- if stat_text != blank -%}
            <div class="proof-points__stat-text">{{ stat_text | escape }}</div>
          {%- endif -%}
        </div>
      {%- else -%}
        <div class="proof-points__placeholder">
          {{ 'lifestyle-1' | placeholder_svg_tag: 'placeholder-svg' }}
        </div>
      {%- endif -%}
    </div>
  </div>

  {%- if section.blocks.size > 0 -%}
    <div class="proof-points__grid">
      {%- for block in section.blocks -%}
        {%- assign block_image = block.settings.image -%}
        {%- assign block_label = block.settings.label -%}

        <div class="proof-points__grid-item" {{ block.shopify_attributes }}>
          {%- if block_image != blank -%}
            <img
              srcset="
                {%- if block_image.width >= 300 -%}{{ block_image | image_url: width: 300 }} 300w,{%- endif -%}
                {%- if block_image.width >= 500 -%}{{ block_image | image_url: width: 500 }} 500w,{%- endif -%}
                {{ block_image | image_url }} {{ block_image.width }}w
              "
              src="{{ block_image | image_url: width: 500 }}"
              sizes="(min-width: 990px) 25vw, 50vw"
              alt="{{ block_image.alt | default: block_label | escape }}"
              loading="lazy"
              width="{{ block_image.width }}"
              height="{{ block_image.height }}"
              class="proof-points__grid-image"
            >
          {%- else -%}
            <div class="proof-points__grid-placeholder">
              {{ 'image' | placeholder_svg_tag: 'placeholder-svg' }}
            </div>
          {%- endif -%}

          {%- if block_label != blank -%}
            <div class="proof-points__grid-label">{{ block_label | escape }}</div>
          {%- endif -%}
        </div>
      {%- endfor -%}
    </div>
  {%- endif -%}
</div>

{% schema %}
{
  "name": "Proof Points",
  "tag": "section",
  "class": "proof-points",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Innovative formulas."
    },
    {
      "type": "text",
      "id": "heading_italic",
      "label": "Heading Italic",
      "default": "Science-backed expertise."
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "DISCOVER MORE"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button Link"
    },
    {
      "type": "header",
      "content": "Statistics"
    },
    {
      "type": "image_picker",
      "id": "stat_image",
      "label": "Statistics Image"
    },
    {
      "type": "text",
      "id": "stat_number",
      "label": "Statistics Number",
      "default": "91%"
    },
    {
      "type": "text",
      "id": "stat_text",
      "label": "Statistics Text",
      "default": "saw results within 30 days of daily use"
    },
    {
      "type": "header",
      "content": "Button Colors"
    },
    {
      "type": "color",
      "id": "button_bg_color",
      "label": "Button Background",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button Text",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "button_border_color",
      "label": "Button Border",
      "default": "#000000"
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Padding Top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Padding Bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 0
    }
  ],
  "blocks": [
    {
      "type": "grid_item",
      "name": "Grid Item",
      "limit": 4,
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "label",
          "label": "Label"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Proof Points",
      "blocks": [
        {
          "type": "grid_item",
          "settings": {
            "label": "INNOVATION"
          }
        },
        {
          "type": "grid_item",
          "settings": {
            "label": "CERTIFICATION"
          }
        },
        {
          "type": "grid_item",
          "settings": {
            "label": "AWARDS"
          }
        },
        {
          "type": "grid_item",
          "settings": {
            "label": "INGREDIENTS"
          }
        }
      ]
    }
  ]
}
{% endschema %}

